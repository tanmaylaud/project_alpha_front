<!DOCTYPE html>
<html>
<head>
	<title>TrueNET</title>
	<script src="js/gauge.js"></script>
	<script src="js/justgage.js"></script>
	<script src="js/raphael-2.1.4.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<div id="gauge"></div>
	<center>
		<button type="button" onclick="getGauge()">Check</button>
	</center>
	<script type="text/javascript">
		var count = 0;
		var g;
		var interval;
		function getGauge(){
			document.getElementById("gauge").innerHTML = "";

			g = CustomJustGage("gauge", "Possibility of\nTruth");

			interval = setInterval(function() {
				g.refresh((count += 100) % 200);
			}, 1000);

			setTimeout(function() {analyze()}, 0);
		}
		function analyze(){
			$.ajax({
				url: "http://ryuzaki.pythonanywhere.com/api/v1/analyze?query=hello",
				type: "get",
				datatype: 'json',
				success: function(data){
					clearInterval(interval);
					g.refresh(data[0].number);
				},
				error: function(){
					var number = 0;
					g.refresh(0);
				}
			});
		}
	</script>
</body>
</html>